<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        let query=""
        function getSearchResult(){
            query = document.getElementById("searchBox").value;
            fetch(`http://127.0.0.1:5000/search?query=${query}`)
                .then(response => response.json())
                .then(data => {
                data.forEach((element, index) => {
                    document.getElementById("resultFound").innerHTML="10 results found"
                    document.getElementById(`myLink${index}`).innerHTML=element.title
                    document.getElementById(`myLink${index}`).href=element.link
                });
            });
        }

        function provideSelection(event){
            fetch(`http://127.0.0.1:5000/search/${query}?selection=${event.href}`);
        }
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
</head>
<body>
   <div class="app-wrapper">
     <div class="header-wrapper">
        Search Engine: Group 7
     </div>
     <div class="body-wrapper">
        <div class="body-left">
          <div class="search-cntr">
              <div class="search-label">
                  Query
              </div>
              <div class="input-cntr">
                <input id="searchBox" type="text" class="search-box mainLoginInput" placeholder="Enter your query" name="searchBox"/>
                <div class="btn-cntr">
                    <button class="search-btn" onclick="getSearchResult()">Search</button>
                </div>
              </div>
          </div> 
          <div class="result-wrapper">

           <div id="resultFound" class="res-label">
           </div>
           {%for i in range(0, 10)%}
           <div class="result-rpt">
            <a class="res-link" target="_blank" id="myLink{{i}}" onclick="provideSelection(this)"></a>
           </div>
           {%endfor%}
          </div> 
          <!-- <div>
            <div class="group-title">
                Group Members
            </div>
            <div class="members">
                Ayesha Zain Jaleel - 210774047
            </div>
            <div class="members">
                Theerdha Sajimon - 210698905
            </div>
            <div class="members">
                Vishnu Manohar - 210427822
            </div>
            <div class="members">
                Varun - 210220256
            </div>
          </div> -->
        </div>
        <div class="body-right">
            
        </div>
     </div>
     <div class="bottom-cntr">
         <div class="group-title-foot">
            Group Members
     </div>
     <div class="members-foot">
        Ayesha Zain Jaleel - 210774047
    </div>
    <div class="members-foot">
        Theerdha Sajimon - 210698905
    </div>
    <div class="members-foot">
        Vishnu Manohar - 210427822
    </div>
    <div class="members-foot">
        Varun - 210220256
    </div>
   </div>
</body>
</html>


